services:
    Happyr\ApiBundle\Security\Authentication\Provider\WsseProvider:
        arguments:
            - ~
            - ~
            - ~
        public: false
        calls:
            - ['setLogger', ['@?logger']]

    Happyr\ApiBundle\Security\Firewall\WsseListener:
        arguments: ['@security.token_storage', '@security.authentication.manager', '@Happyr\ApiBundle\Service\ResponseFactory']

    Happyr\ApiBundle\Service\ResponseFactory:
        arguments: ['@happyr_api.fractal']

    happyr_api.fractal:
        class: League\Fractal\Manager
        calls:
            - [setSerializer, ['@happyr_api.fractal.serializer']]

    happyr_api.fractal.serializer:
        class: League\Fractal\Serializer\DataArraySerializer

    Happyr\ApiBundle\EventListener\ExceptionListener:
        arguments: ['@Happyr\ApiBundle\Service\ResponseFactory', ~]
